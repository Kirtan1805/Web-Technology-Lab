<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Real-Time User Activity Monitor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
      color: white;
      padding: 25px;
      text-align: center;
    }

    .header h1 {
      font-size: 28px;
      margin-bottom: 5px;
    }

    .header p {
      opacity: 0.9;
      font-size: 14px;
    }

    .monitor-container {
      display: flex;
      min-height: 600px;
    }

    .activity-panel {
      flex: 1;
      padding: 20px;
      border-right: 2px solid #e1e8ed;
      display: flex;
      flex-direction: column;
    }

    .control-panel {
      width: 350px;
      padding: 20px;
      background: #f8f9fa;
      display: flex;
      flex-direction: column;
    }

    .panel-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #333;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .activity-zone {
      flex: 1;
      border: 3px dashed #4ECDC4;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #f8fff9 0%, #e8f5e8 100%);
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
    }

    .activity-zone:hover {
      border-color: #FF6B6B;
      background: linear-gradient(135deg, #fff8f8 0%, #ffe8e8 100%);
    }

    .activity-zone h3 {
      color: #4ECDC4;
      margin-bottom: 10px;
    }

    .activity-zone p {
      color: #666;
      margin-bottom: 20px;
    }

    .interaction-elements {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .interactive-btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .btn-primary { background: #4ECDC4; color: white; }
    .btn-primary:hover { background: #45b7aa; transform: translateY(-2px); }

    .btn-secondary { background: #FF6B6B; color: white; }
    .btn-secondary:hover { background: #e55a5a; transform: translateY(-2px); }

    .btn-warning { background: #f39c12; color: white; }
    .btn-warning:hover { background: #e08e0b; transform: translateY(-2px); }

    .input-field {
      width: 100%;
      padding: 10px;
      border: 2px solid #e1e8ed;
      border-radius: 6px;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .input-field:focus {
      outline: none;
      border-color: #4ECDC4;
    }

    .activity-log {
      flex: 1;
      background: white;
      border-radius: 8px;
      padding: 15px;
      overflow-y: auto;
      max-height: 400px;
      border: 1px solid #e1e8ed;
    }

    .log-entry {
      padding: 8px 12px;
      margin-bottom: 5px;
      border-radius: 6px;
      font-size: 13px;
      border-left: 4px solid #e1e8ed;
      transition: all 0.2s ease;
    }

    .log-entry:hover {
      background: #f8f9fa;
      transform: translateX(2px);
    }

    .log-entry.click { border-left-color: #4ECDC4; background: #f8fff9; }
    .log-entry.keypress { border-left-color: #FF6B6B; background: #fff8f8; }
    .log-entry.focus { border-left-color: #f39c12; background: #fffbf0; }
    .log-entry.blur { border-left-color: #9b59b6; background: #f8f0ff; }
    .log-entry.suspicious { border-left-color: #e74c3c; background: #ffeaea; animation: pulse 1s infinite; }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }

    .log-timestamp {
      color: #666;
      font-weight: bold;
      margin-right: 8px;
    }

    .log-type {
      font-weight: bold;
      text-transform: uppercase;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 3px;
      margin-right: 8px;
    }

    .log-type.click { background: #4ECDC4; color: white; }
    .log-type.keypress { background: #FF6B6B; color: white; }
    .log-type.focus { background: #f39c12; color: white; }
    .log-type.blur { background: #9b59b6; color: white; }
    .log-type.suspicious { background: #e74c3c; color: white; }

    .log-details {
      color: #555;
    }

    .stats-panel {
      background: white;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      border: 1px solid #e1e8ed;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
    }

    .stat-item {
      text-align: center;
      padding: 10px;
      border-radius: 6px;
      background: #f8f9fa;
    }

    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #4ECDC4;
      display: block;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .warning-panel {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      display: none;
    }

    .warning-panel.show {
      display: block;
    }

    .warning-panel h4 {
      color: #856404;
      margin-bottom: 10px;
    }

    .warning-panel p {
      color: #856404;
      margin: 0;
    }

    .control-buttons {
      display: grid;
      gap: 10px;
    }

    .control-btn {
      padding: 12px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
    }

    .btn-clear { background: #6c757d; color: white; }
    .btn-clear:hover { background: #5a6268; }

    .btn-export { background: #28a745; color: white; }
    .btn-export:hover { background: #218838; }

    .btn-reset { background: #dc3545; color: white; }
    .btn-reset:hover { background: #c82333; }

    .settings-panel {
      background: white;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      border: 1px solid #e1e8ed;
    }

    .settings-grid {
      display: grid;
      gap: 10px;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .setting-label {
      font-size: 14px;
    }

    .setting-input {
      width: 80px;
      padding: 5px 8px;
      border: 1px solid #e1e8ed;
      border-radius: 4px;
      text-align: center;
    }

    .setting-input:focus {
      outline: none;
      border-color: #4ECDC4;
    }

    @media (max-width: 768px) {
      .monitor-container {
        flex-direction: column;
      }

      .control-panel {
        width: 100%;
      }

      .activity-panel {
        border-right: none;
        border-bottom: 2px solid #e1e8ed;
      }
    }
  </style>
</head>

<body>

<div class="container">
  <div class="header">
    <h1>üîç Real-Time User Activity Monitor</h1>
    <p>Track clicks, key presses, and focus events with suspicious activity detection</p>
  </div>

  <div class="monitor-container">
    <!-- Activity Panel -->
    <div class="activity-panel">
      <div class="panel-title">
        üéØ Activity Zone
      </div>

      <div class="activity-zone" id="activityZone">
        <h3>Interact Here!</h3>
        <p>Click, type, and focus on elements to see real-time activity monitoring</p>

        <div class="interaction-elements">
          <button class="interactive-btn btn-primary" id="btn1">Click Me!</button>
          <button class="interactive-btn btn-secondary" id="btn2">Press Me</button>
          <button class="interactive-btn btn-warning" id="btn3">Tap Here</button>
          <input type="text" class="input-field" id="input1" placeholder="Type here...">
          <input type="text" class="input-field" id="input2" placeholder="Focus test...">
          <textarea class="input-field" id="textarea1" placeholder="Multi-line text..." rows="3"></textarea>
        </div>
      </div>

      <div class="panel-title">
        üìä Activity Statistics
      </div>

      <div class="stats-panel">
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-value" id="totalActivities">0</span>
            <span class="stat-label">Total Activities</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="clicksCount">0</span>
            <span class="stat-label">Clicks</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="keypressesCount">0</span>
            <span class="stat-label">Key Presses</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="focusCount">0</span>
            <span class="stat-label">Focus Events</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="suspiciousCount">0</span>
            <span class="stat-label">Suspicious</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" id="sessionTime">0s</span>
            <span class="stat-label">Session Time</span>
          </div>
        </div>
      </div>

      <div class="warning-panel" id="warningPanel">
        <h4>‚ö†Ô∏è Suspicious Activity Detected!</h4>
        <p id="warningMessage">Unusual user behavior has been detected.</p>
      </div>
    </div>

    <!-- Control Panel -->
    <div class="control-panel">
      <div class="panel-title">
        ‚öôÔ∏è Settings & Controls
      </div>

      <div class="settings-panel">
        <div class="settings-grid">
          <div class="setting-item">
            <span class="setting-label">Max Log Entries:</span>
            <input type="number" class="setting-input" id="maxLogEntries" value="100" min="10" max="1000">
          </div>
          <div class="setting-item">
            <span class="setting-label">Click Threshold:</span>
            <input type="number" class="setting-input" id="clickThreshold" value="10" min="5" max="50">
          </div>
          <div class="setting-item">
            <span class="setting-label">Keypress Threshold:</span>
            <input type="number" class="setting-input" id="keypressThreshold" value="20" min="10" max="100">
          </div>
          <div class="setting-item">
            <span class="setting-label">Time Window (s):</span>
            <input type="number" class="setting-input" id="timeWindow" value="5" min="1" max="30">
          </div>
        </div>
      </div>

      <div class="control-buttons">
        <button class="control-btn btn-clear" id="clearLogBtn">üóëÔ∏è Clear Activity Log</button>
        <button class="control-btn btn-export" id="exportLogBtn">üìÑ Export Activity Log</button>
        <button class="control-btn btn-reset" id="resetMonitorBtn">üîÑ Reset Monitor</button>
      </div>

      <div class="panel-title">
        üìù Activity Log
      </div>

      <div class="activity-log" id="activityLog">
        <div class="log-entry">
          <span class="log-timestamp">[00:00:00]</span>
          <span class="log-type">system</span>
          Activity monitoring started
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // 1Ô∏è‚É£ Activity Storage Structure
  let activityLog = [];
  let sessionStartTime = Date.now();
  let sessionTimer;

  // Statistics counters
  let stats = {
    total: 0,
    clicks: 0,
    keypresses: 0,
    focus: 0,
    suspicious: 0
  };

  // Suspicious activity thresholds (configurable)
  let thresholds = {
    maxLogEntries: 100,
    clickThreshold: 10, // clicks per time window
    keypressThreshold: 20, // keypresses per time window
    timeWindow: 5000 // milliseconds
  };

  // 2Ô∏è‚É£ Event Listener Setup with Capturing and Bubbling
  function initializeEventListeners() {
    // Use capturing phase for comprehensive event tracking
    document.addEventListener('click', handleClickEvent, true); // Capturing phase
    document.addEventListener('keypress', handleKeypressEvent, true); // Capturing phase
    document.addEventListener('focusin', handleFocusEvent, true); // Capturing phase
    document.addEventListener('focusout', handleBlurEvent, true); // Capturing phase

    // Also add bubbling phase listeners for comparison
    document.addEventListener('click', handleClickEvent, false); // Bubbling phase
    document.addEventListener('keypress', handleKeypressEvent, false); // Bubbling phase

    // Start session timer
    sessionTimer = setInterval(updateSessionTime, 1000);
  }

  // 3Ô∏è‚É£ Event Handlers with Detailed Logging
  function handleClickEvent(event) {
    const activity = {
      id: Date.now() + Math.random(),
      timestamp: new Date(),
      type: 'click',
      phase: event.eventPhase === 1 ? 'capturing' : 'bubbling',
      target: {
        tagName: event.target.tagName,
        id: event.target.id,
        className: event.target.className,
        textContent: event.target.textContent?.substring(0, 50) || ''
      },
      position: {
        x: event.clientX,
        y: event.clientY,
        screenX: event.screenX,
        screenY: event.screenY
      },
      button: event.button,
      ctrlKey: event.ctrlKey,
      shiftKey: event.shiftKey,
      altKey: event.altKey
    };

    logActivity(activity);
    stats.clicks++;
    updateStats();

    // Check for suspicious click patterns
    checkSuspiciousClicks();
  }

  function handleKeypressEvent(event) {
    const activity = {
      id: Date.now() + Math.random(),
      timestamp: new Date(),
      type: 'keypress',
      phase: event.eventPhase === 1 ? 'capturing' : 'bubbling',
      target: {
        tagName: event.target.tagName,
        id: event.target.id,
        className: event.target.className,
        type: event.target.type
      },
      key: event.key,
      code: event.code,
      keyCode: event.keyCode,
      ctrlKey: event.ctrlKey,
      shiftKey: event.shiftKey,
      altKey: event.altKey,
      repeat: event.repeat
    };

    logActivity(activity);
    stats.keypresses++;
    updateStats();

    // Check for suspicious keypress patterns
    checkSuspiciousKeypresses();
  }

  function handleFocusEvent(event) {
    const activity = {
      id: Date.now() + Math.random(),
      timestamp: new Date(),
      type: 'focus',
      phase: 'capturing',
      target: {
        tagName: event.target.tagName,
        id: event.target.id,
        className: event.target.className,
        type: event.target.type
      },
      relatedTarget: event.relatedTarget ? {
        tagName: event.relatedTarget.tagName,
        id: event.relatedTarget.id
      } : null
    };

    logActivity(activity);
    stats.focus++;
    updateStats();
  }

  function handleBlurEvent(event) {
    const activity = {
      id: Date.now() + Math.random(),
      timestamp: new Date(),
      type: 'blur',
      phase: 'capturing',
      target: {
        tagName: event.target.tagName,
        id: event.target.id,
        className: event.target.className,
        type: event.target.type
      },
      relatedTarget: event.relatedTarget ? {
        tagName: event.relatedTarget.tagName,
        id: event.relatedTarget.id
      } : null
    };

    logActivity(activity);
  }

  // 4Ô∏è‚É£ Activity Logging and Storage
  function logActivity(activity) {
    activityLog.unshift(activity); // Add to beginning for latest first

    // Limit log size
    if (activityLog.length > thresholds.maxLogEntries) {
      activityLog = activityLog.slice(0, thresholds.maxLogEntries);
    }

    stats.total++;
    updateActivityLogDisplay();
  }

  // 5Ô∏è‚É£ Suspicious Activity Detection
  function checkSuspiciousClicks() {
    const now = Date.now();
    const timeWindow = now - thresholds.timeWindow;
    const recentClicks = activityLog.filter(activity =>
      activity.type === 'click' &&
      activity.timestamp.getTime() > timeWindow
    );

    if (recentClicks.length >= thresholds.clickThreshold) {
      const suspiciousActivity = {
        id: Date.now() + Math.random(),
        timestamp: new Date(),
        type: 'suspicious',
        subtype: 'rapid_clicking',
        message: `${recentClicks.length} clicks in ${thresholds.timeWindow/1000} seconds`,
        details: `Threshold: ${thresholds.clickThreshold} clicks`,
        severity: 'high'
      };

      logActivity(suspiciousActivity);
      stats.suspicious++;
      showWarning(`üö® Rapid clicking detected! ${recentClicks.length} clicks in ${thresholds.timeWindow/1000} seconds.`);
    }
  }

  function checkSuspiciousKeypresses() {
    const now = Date.now();
    const timeWindow = now - thresholds.timeWindow;
    const recentKeypresses = activityLog.filter(activity =>
      activity.type === 'keypress' &&
      activity.timestamp.getTime() > timeWindow
    );

    if (recentKeypresses.length >= thresholds.keypressThreshold) {
      const suspiciousActivity = {
        id: Date.now() + Math.random(),
        timestamp: new Date(),
        type: 'suspicious',
        subtype: 'rapid_typing',
        message: `${recentKeypresses.length} keypresses in ${thresholds.timeWindow/1000} seconds`,
        details: `Threshold: ${thresholds.keypressThreshold} keypresses`,
        severity: 'medium'
      };

      logActivity(suspiciousActivity);
      stats.suspicious++;
      showWarning(`‚ö†Ô∏è Rapid typing detected! ${recentKeypresses.length} keypresses in ${thresholds.timeWindow/1000} seconds.`);
    }
  }

  function showWarning(message) {
    const warningPanel = document.getElementById('warningPanel');
    const warningMessage = document.getElementById('warningMessage');
    warningMessage.textContent = message;
    warningPanel.classList.add('show');

    // Auto-hide after 5 seconds
    setTimeout(() => {
      warningPanel.classList.remove('show');
    }, 5000);
  }

  // 6Ô∏è‚É£ Dynamic DOM Display Updates
  function updateActivityLogDisplay() {
    const activityLogElement = document.getElementById('activityLog');

    activityLogElement.innerHTML = activityLog.slice(0, 50).map(activity => {
      const timeString = activity.timestamp.toLocaleTimeString();
      const typeClass = activity.type;
      const typeLabel = activity.type.toUpperCase();

      let details = '';

      switch (activity.type) {
        case 'click':
          details = `${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} at (${activity.position.x}, ${activity.position.y}) [${activity.phase}]`;
          break;
        case 'keypress':
          details = `Key: "${activity.key}" in ${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} [${activity.phase}]`;
          break;
        case 'focus':
          details = `${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} gained focus`;
          break;
        case 'blur':
          details = `${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} lost focus`;
          break;
        case 'suspicious':
          details = `${activity.message} - ${activity.details}`;
          break;
        default:
          details = 'Unknown activity';
      }

      return `
        <div class="log-entry ${typeClass}">
          <span class="log-timestamp">[${timeString}]</span>
          <span class="log-type ${typeClass}">${typeLabel}</span>
          <span class="log-details">${details}</span>
        </div>
      `;
    }).join('');
  }

  function updateStats() {
    document.getElementById('totalActivities').textContent = stats.total;
    document.getElementById('clicksCount').textContent = stats.clicks;
    document.getElementById('keypressesCount').textContent = stats.keypresses;
    document.getElementById('focusCount').textContent = stats.focus;
    document.getElementById('suspiciousCount').textContent = stats.suspicious;
  }

  function updateSessionTime() {
    const elapsed = Math.floor((Date.now() - sessionStartTime) / 1000);
    const minutes = Math.floor(elapsed / 60);
    const seconds = elapsed % 60;
    document.getElementById('sessionTime').textContent = `${minutes}m ${seconds}s`;
  }

  // 7Ô∏è‚É£ Export and Reset Functionality
  function clearActivityLog() {
    activityLog = [];
    stats = { total: 0, clicks: 0, keypresses: 0, focus: 0, suspicious: 0 };
    updateActivityLogDisplay();
    updateStats();

    const systemActivity = {
      id: Date.now(),
      timestamp: new Date(),
      type: 'system',
      message: 'Activity log cleared by user'
    };
    logActivity(systemActivity);
  }

  function exportActivityLog() {
    const exportData = {
      sessionInfo: {
        startTime: new Date(sessionStartTime).toISOString(),
        duration: Math.floor((Date.now() - sessionStartTime) / 1000),
        totalActivities: stats.total
      },
      statistics: stats,
      thresholds: thresholds,
      activities: activityLog
    };

    const formattedText = `
USER ACTIVITY MONITOR EXPORT
=============================

Session Information:
- Start Time: ${new Date(sessionStartTime).toLocaleString()}
- Duration: ${Math.floor((Date.now() - sessionStartTime) / 1000)} seconds
- Total Activities: ${stats.total}

Statistics:
- Clicks: ${stats.clicks}
- Keypresses: ${stats.keypresses}
- Focus Events: ${stats.focus}
- Suspicious Activities: ${stats.suspicious}

Detection Thresholds:
- Max Log Entries: ${thresholds.maxLogEntries}
- Click Threshold: ${thresholds.clickThreshold} per ${thresholds.timeWindow/1000}s
- Keypress Threshold: ${thresholds.keypressThreshold} per ${thresholds.timeWindow/1000}s

Detailed Activity Log:
${activityLog.map((activity, index) => {
  const time = activity.timestamp.toLocaleTimeString();
  const type = activity.type.toUpperCase().padEnd(10);
  let details = '';

  switch (activity.type) {
    case 'click':
      details = `${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} at (${activity.position.x}, ${activity.position.y}) [${activity.phase}]`;
      break;
    case 'keypress':
      details = `Key: "${activity.key}" in ${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} [${activity.phase}]`;
      break;
    case 'focus':
      details = `${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} gained focus`;
      break;
    case 'blur':
      details = `${activity.target.tagName}${activity.target.id ? `#${activity.target.id}` : ''} lost focus`;
      break;
    case 'suspicious':
      details = `${activity.message} - ${activity.details}`;
      break;
    case 'system':
      details = activity.message;
      break;
  }

  return `${String(index + 1).padStart(4, ' ')}. [${time}] ${type} ${details}`;
}).join('\n')}

=============================
Export generated on: ${new Date().toLocaleString()}
    `.trim();

    // Create and download file
    const blob = new Blob([formattedText], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `activity-monitor-export-${new Date().toISOString().split('T')[0]}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);

    // Log export activity
    const exportActivity = {
      id: Date.now(),
      timestamp: new Date(),
      type: 'system',
      message: 'Activity log exported to file'
    };
    logActivity(exportActivity);
  }

  function resetMonitor() {
    if (confirm('Are you sure you want to reset the monitor? This will clear all data and restart the session.')) {
      clearActivityLog();
      sessionStartTime = Date.now();
      document.getElementById('warningPanel').classList.remove('show');

      const resetActivity = {
        id: Date.now(),
        timestamp: new Date(),
        type: 'system',
        message: 'Monitor reset - new session started'
      };
      logActivity(resetActivity);
    }
  }

  // Settings change handlers
  function updateThresholds() {
    thresholds.maxLogEntries = parseInt(document.getElementById('maxLogEntries').value);
    thresholds.clickThreshold = parseInt(document.getElementById('clickThreshold').value);
    thresholds.keypressThreshold = parseInt(document.getElementById('keypressThreshold').value);
    thresholds.timeWindow = parseInt(document.getElementById('timeWindow').value) * 1000;

    // Trim log if needed
    if (activityLog.length > thresholds.maxLogEntries) {
      activityLog = activityLog.slice(0, thresholds.maxLogEntries);
      updateActivityLogDisplay();
    }

    const settingsActivity = {
      id: Date.now(),
      timestamp: new Date(),
      type: 'system',
      message: 'Detection thresholds updated'
    };
    logActivity(settingsActivity);
  }

  // Event listeners for controls
  document.getElementById('clearLogBtn').addEventListener('click', clearActivityLog);
  document.getElementById('exportLogBtn').addEventListener('click', exportActivityLog);
  document.getElementById('resetMonitorBtn').addEventListener('click', resetMonitor);

  // Settings change listeners
  document.getElementById('maxLogEntries').addEventListener('change', updateThresholds);
  document.getElementById('clickThreshold').addEventListener('change', updateThresholds);
  document.getElementById('keypressThreshold').addEventListener('change', updateThresholds);
  document.getElementById('timeWindow').addEventListener('change', updateThresholds);

  // Initialize the monitor
  initializeEventListeners();
  updateStats();

  // Log initial system activity
  const initActivity = {
    id: Date.now(),
    timestamp: new Date(),
    type: 'system',
    message: 'Real-Time Activity Monitor initialized'
  };
  logActivity(initActivity);
</script>

</body>
</html>
